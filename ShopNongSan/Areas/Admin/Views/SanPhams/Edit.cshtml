@model SanPham
@{
    ViewData["Title"] = "Sửa sản phẩm";
    string ImgUrl(string? p) =>
        string.IsNullOrWhiteSpace(p) ? Url.Content("~/images/no-image.png")
        : (p.StartsWith("/") ? Url.Content("~" + p) : Url.Content("~/images/" + p));
}
<h2 class="mb-3">Sửa sản phẩm</h2>

<form asp-area="Admin" asp-controller="SanPhams" asp-action="Edit" method="post" enctype="multipart/form-data" class="row g-3">
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(false, "", new { @class = "text-danger" })
    <input type="hidden" asp-for="Id" />

    <div class="col-md-6">
        <label class="form-label">Tên</label>
        <input asp-for="Ten" class="form-control" />
        <span asp-validation-for="Ten" class="text-danger"></span>
    </div>

    <div class="col-md-3">
        <label class="form-label">Giá</label>
        <input asp-for="Gia" type="number" step="0.01" min="0" class="form-control" />
        <span asp-validation-for="Gia" class="text-danger"></span>
    </div>

    <div class="col-md-3">
        <label class="form-label">Số lượng tồn</label>
        <input asp-for="SoLuongTon" type="number" min="0" class="form-control" />
        <span asp-validation-for="SoLuongTon" class="text-danger"></span>
    </div>

    <div class="col-md-6">
        <label class="form-label">Danh mục</label>
        <select asp-for="DanhMucId" asp-items="ViewBag.DanhMucId" class="form-select"></select>
        <span asp-validation-for="DanhMucId" class="text-danger"></span>
    </div>

    <div class="col-md-6">
        <label class="form-label">Thương hiệu</label>
        <select asp-for="ThuongHieuId" asp-items="ViewBag.ThuongHieuId" class="form-select">
            <option value="">-- Không --</option>
        </select>
    </div>

    <div class="col-md-6">
        <label class="form-label d-block">Hình ảnh hiện tại</label>
        <img src="@ImgUrl(Model.HinhAnh)" alt="@Model.Ten" style="height:140px;object-fit:cover" class="rounded border" />
    </div>

    <div class="col-md-6">
        <label class="form-label">Đổi hình ảnh</label>
        <input type="file" name="HinhAnhFile" class="form-control" accept=".jpg,.jpeg,.png,.webp,.gif" />
        <span asp-validation-for="HinhAnh" class="text-danger"></span>
    </div>

    <div class="col-12">
        <button type="submit" class="btn btn-primary">Cập nhật</button>
        <a asp-area="Admin" asp-controller="SanPhams" asp-action="Index" class="btn btn-secondary">Quay lại</a>
    </div>
</form>
